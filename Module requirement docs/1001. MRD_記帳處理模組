MRD_記帳處理模組

1.0 模組概述（Module Overview）
記帳處理模組的主要用途是處理使用者的記帳操作。此模組負責記錄各種收支項目，並確保數據的準確性和完整性。它在整體系統中扮演核心角色，處理所有與記帳相關的業務邏輯，並將數據存儲於Google Sheets中，供後續查詢和分析使用。

2.0 功能需求（Functional Requirements）
2.1 記帳操作
- 新增收支項目：使用者可以新增一筆收支項目，包括日期、類別、金額、備註等資訊。
- 編輯收支項目：使用者可以編輯已存在的收支項目，修改其內容。
- 刪除收支項目：使用者可以刪除不需要的收支項目。

2.2 類別管理
- 新增類別：使用者可以新增自定義的收支類別。
- 編輯類別：使用者可以編輯已存在的類別名稱或描述。
- 刪除類別：使用者可以刪除不再使用的類別。

2.3 其他功能
- 批量導入：支持批量導入收支數據，格式可以是CSV或Excel文件。
- 數據驗證：對輸入的收支數據進行驗證，確保數據格式正確且無重複。
- 自動分類：根據一定的規則，自動將收支項目分類到對應的類別中。

3.0 輸入/輸出規格（Input & Output Specifications）
3.1 輸入
參照Header_General Ledger，需紀錄如下：
1.  收支ID
    格式為YYYYMMDD-當日流水號5碼，例：20250326-00001。在記帳時自動產生。
2.  日期
    格式為(YYYY/MM/DD)。例：2025/03/26。從LINE Chatbot抓取日期
3.  時間    
    格式為24小時制。例：14:03。從LINE Chatbot抓取日期
4.  科目大項
    請參考0002. Subject form 科目大項
5.  科目代碼
    請參考0002. Subject form 科目代碼
6.  費用種類
    分為刷卡、現金 2種
7.  科目名稱
    請參考0002. Subject form  科目名稱
8.  登錄者
    格式為LINE UID。擷取自LINE chatbot使用者ID
9.  備註
    其他須備註之文字
10.  收入
    收入填在這欄
11. 支出
    支出填在這欄

3.2 輸出
- 收支報表：按日、週、月、年匯總的收支報表
- 分類統計：按類別匯總的收支統計數據

4.0 錯誤處理與例外狀況（Error Handling & Edge Cases）
- 數據格式錯誤：提示使用者輸入正確的數據格式，如日期格式錯誤、金額為非數字等。
- 重複數據：檢測到重複的收支項目時，提示使用者確認是否要覆蓋或保留。
- 類別不存在：當收支項目所屬的類別在系統中不存在時，提示使用者新增該類別或選擇其他類別。

5.0 測試計畫（Test Plan）
5.1 單元測試
- 測試各個功能模組，如新增、編輯、刪除收支項目和類別等，確保其正常運行。

5.2 整合測試
- 測試記帳處理模組與其他模組的整合，確保數據在各模組間的流轉正確無誤。

5.3 使用者測試
- 邀請使用者進行測試，收集反饋意見，並進行相應的改進。

5.4 邊界測試
- 測試各種邊界條件，如最大/最小數值、空值、特殊字符等，確保系統在這些情況下的穩定性。

