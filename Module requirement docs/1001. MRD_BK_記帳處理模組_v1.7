MRD_記帳處理模組_Book-keeping_v1.7
1.0 模組概述（Module Overview）
BK（記帳處理模組）專注於處理使用者的記帳操作，負責記錄各種收支項目，確保數據的準確性和完整性。該模組接收來自 DD 的記帳指令，
並將整理後的數據存儲至 Google Sheets 中的單獨帳本，供後續查詢與分析使用。

Google sheet ID:
1TSn-X-8B_PDUseZZPbbc0AhK55E80DBXJqkPRtStOUY

2.0 功能需求（Functional Requirements）
2.1 記帳操作
- 新增收支項目 使用者透過 LINE Messaging API 記錄一筆收支項目，包括日期、時間、子項代碼、金額、登錄者（LINE UID）、備註等資訊。
- 自動生成收支 ID 格式為 YYYYMMDD-當日流水號 5 碼（例 20250326-00001）。
- 科目分類 透過 DD 模組提供的解析結果，自動對應大項代碼與子項代碼。
2.2 類別管理
- 根據 「00. 科目代碼」 工作表維護科目資訊（但 BK 不負責同義詞管理與解析）。
2.3 其他功能
- 資料驗證
  - 確保日期、時間格式正確。
  - 金額不得為負數，收入與支出欄位只能填一個。
  - 確保子項代碼存在於 「00. 科目代碼」 工作表。

3.0 輸入/輸出規格（Input & Output Specifications）
3.1 輸入
來自 DD 模組解析 的記帳數據，紀錄如下
1. 收支 ID（YYYYMMDD-00001）
2. User 類型（M, S, J）
3. 日期（YYYY/MM/DD），來自 LINE Messaging API
4. 時間（HH mm），來自 LINE Messaging API
5. 大項代碼（由 DD 模組解析 提供）
6. 子項代碼（由 DD 模組解析 提供）
7. 費用種類（刷卡  現金）
8. 子項名稱（由 DD 模組解析 提供）
9. 登錄者（LINE UID）
10. 備註（可選）
11. 收入（收入金額填於此）
12. 支出（支出金額填於此）
13. 同義詞（由 DD 模組解析 提供）

3.2 輸出
- 記帳數據儲存至 「01. 總帳」 工作表，供後續查詢與分析使用。

4.0 錯誤處理與例外狀況（Error Handling & Edge Cases）
- 數據格式錯誤 輸入格式異常時（如日期格式錯誤、金額為非數字），回傳錯誤訊息。
- 重複數據 檢測到相同的 收支 ID 時，提示使用者確認是否覆蓋或跳過。
- 缺少必要欄位 若 DD 模組回傳的數據缺少關鍵欄位（如日期、金額），則提示使用者補充或使用預設值。

5.0 測試計畫（Test Plan）
5.1 單元測試
- 測試 記帳數據的新增、編輯、刪除功能，確保記錄正常運作。
- 測試 資料驗證邏輯，確保數據正確無誤。
5.2 整合測試
- 測試 BK 與 Google Sheets、LINE Messaging API、DD 模組的整合，確保數據流轉正確。
5.3 使用者測試
- 邀請使用者進行記帳測試，收集回饋，並進行改進。
5.4 邊界測試
- 測試 最大 最小數值、空值、特殊字符，確保系統穩定性。
